<UserControl x:Class="FamilyTreeApp.UI.Controls.CanvasTextBox"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             MinWidth="50" MinHeight="30"
             Background="Transparent"
             MouseEnter="UserControl_MouseEnter"
             MouseLeave="UserControl_MouseLeave">
    
    <Grid>
        <!-- Main Content Border -->
        <Border x:Name="MainBorder" 
                BorderBrush="{DynamicResource BorderBrush}" 
                BorderThickness="1"
                CornerRadius="4"
                Background="{DynamicResource TertiaryBackgroundBrush}">
            
            <Grid>
                <!-- Text Display (when not editing) -->
                <TextBlock x:Name="TextDisplay" 
                           Text="Text"
                           TextWrapping="Wrap"
                           Foreground="{DynamicResource PrimaryTextBrush}"
                           Padding="8"
                           FontSize="14"/>
                
                <!-- Text Edit (when editing) -->
                <TextBox x:Name="TextContent" 
                         Text="Text"
                         TextWrapping="Wrap"
                         AcceptsReturn="True"
                         Background="Transparent"
                         BorderThickness="0"
                         Foreground="{DynamicResource PrimaryTextBrush}"
                         Padding="8"
                         FontSize="14"
                         VerticalScrollBarVisibility="Auto"
                         Visibility="Collapsed"/>
            </Grid>
        </Border>
        
        <!-- Delete Button (visible on Shift+hover) -->
        <Button x:Name="DeleteButton"
                Width="24" Height="24"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Margin="0,-12,-12,0"
                Cursor="Hand"
                Visibility="Collapsed"
                Click="DeleteButton_Click"
                ToolTip="Delete Text Box">
            <Button.Template>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <Ellipse Fill="#CC3333" Width="24" Height="24"/>
                        <TextBlock Text="ðŸ—‘" FontSize="12" 
                                   HorizontalAlignment="Center" 
                                   VerticalAlignment="Center"
                                   Foreground="White"/>
                    </Grid>
                </ControlTemplate>
            </Button.Template>
        </Button>
        
        <!-- Corner Resize Handles (only visible when selected) -->
        <Rectangle x:Name="ResizeTopLeft" Width="8" Height="8" 
                   HorizontalAlignment="Left" VerticalAlignment="Top"
                   Margin="-4,-4,0,0" Cursor="SizeNWSE"
                   Fill="{DynamicResource AccentBrush}" Visibility="Collapsed"/>
        <Rectangle x:Name="ResizeTopRight" Width="8" Height="8" 
                   HorizontalAlignment="Right" VerticalAlignment="Top"
                   Margin="0,-4,-4,0" Cursor="SizeNESW"
                   Fill="{DynamicResource AccentBrush}" Visibility="Collapsed"/>
        <Rectangle x:Name="ResizeBottomLeft" Width="8" Height="8" 
                   HorizontalAlignment="Left" VerticalAlignment="Bottom"
                   Margin="-4,0,0,-4" Cursor="SizeNESW"
                   Fill="{DynamicResource AccentBrush}" Visibility="Collapsed"/>
        <Rectangle x:Name="ResizeBottomRight" Width="8" Height="8" 
                   HorizontalAlignment="Right" VerticalAlignment="Bottom"
                   Margin="0,0,-4,-4" Cursor="SizeNWSE"
                   Fill="{DynamicResource AccentBrush}" Visibility="Collapsed"/>
    </Grid>
</UserControl>
